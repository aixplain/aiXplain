---
sidebar_label: team_agent
title: aixplain.modules.team_agent
---

#### \_\_author\_\_

Copyright 2024 The aiXplain SDK authors

Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

Author: Lucas Pavanelli and Thiago Castro Ferreira
Date: August 15th 2024
Description:
    Team Agent Class

### InspectorTarget Objects

```python
class InspectorTarget(str, Enum)
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L52)

Target stages for inspector validation in the team agent pipeline.

This enumeration defines the stages where inspectors can be applied to
validate and ensure quality of the team agent&#x27;s operation.

**Attributes**:

- `INPUT` - Validates the input data before processing.
- `STEPS` - Validates intermediate steps during processing.
- `OUTPUT` - Validates the final output before returning.

#### \_\_str\_\_

```python
def __str__()
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L68)

Return the string value of the enum member.

**Returns**:

- `str` - The string value associated with the enum member.

### TeamAgent Objects

```python
class TeamAgent(Model, DeployableMixin[Agent])
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L77)

Advanced AI system capable of using multiple agents to perform a variety of tasks.

**Attributes**:

- `id` _Text_ - ID of the Team Agent
- `name` _Text_ - Name of the Team Agent
- `agents` _List[Agent]_ - List of agents that the Team Agent uses.
- `description` _Text, optional_ - description of the Team Agent. Defaults to &quot;&quot;.
- `llm_id` _Text, optional_ - large language model. Defaults to GPT-4o (6646261c6eb563165658bbb1).
- `api_key` _str_ - The TEAM API key used for authentication.
- `supplier` _Text_ - Supplier of the Team Agent.
- `version` _Text_ - Version of the Team Agent.
- `cost` _Dict, optional_ - model price. Defaults to None.
- `use_mentalist` _bool_ - Use Mentalist agent for pre-planning. Defaults to True.
- `name`0 _List[Inspector]_ - List of inspectors that the team agent uses.
- `name`1 _List[InspectorTarget]_ - List of targets where the inspectors are applied. Defaults to [InspectorTarget.STEPS].

#### run

```python
def run(
    data: Optional[Union[Dict, Text]] = None,
    query: Optional[Text] = None,
    session_id: Optional[Text] = None,
    history: Optional[List[Dict]] = None,
    name: Text = "model_process",
    timeout: float = 300,
    parameters: Dict = {},
    wait_time: float = 0.5,
    content: Optional[Union[Dict[Text, Text], List[Text]]] = None,
    max_tokens: int = 2048,
    max_iterations: int = 30,
    output_format: Optional[OutputFormat] = None,
    expected_output: Optional[Union[BaseModel, Text, dict]] = None
) -> AgentResponse
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L183)

Runs a team agent call.

**Arguments**:

- `data` _Optional[Union[Dict, Text]], optional_ - data to be processed by the team agent. Defaults to None.
- `query` _Optional[Text], optional_ - query to be processed by the team agent. Defaults to None.
- `session_id` _Optional[Text], optional_ - conversation Session ID. Defaults to None.
- `history` _Optional[List[Dict]], optional_ - chat history (in case session ID is None). Defaults to None.
- `name` _Text, optional_ - ID given to a call. Defaults to &quot;model_process&quot;.
- `timeout` _float, optional_ - total polling time. Defaults to 300.
- `parameters` _Dict, optional_ - optional parameters to the model. Defaults to &quot;\{}&quot;.
- `wait_time` _float, optional_ - wait time in seconds between polling calls. Defaults to 0.5.
- `content` _Union[Dict[Text, Text], List[Text]], optional_ - Content inputs to be processed according to the query. Defaults to None.
- `max_tokens` _int, optional_ - maximum number of tokens which can be generated by the agents. Defaults to 2048.
- `query`0 _int, optional_ - maximum number of iterations between the agents. Defaults to 30.
- `query`1 _OutputFormat, optional_ - response format. If not provided, uses the format set during initialization.
- `query`2 _Union[BaseModel, Text, dict], optional_ - expected output. Defaults to None.

**Returns**:

- `query`3 - parsed output from model

#### run\_async

```python
def run_async(
    data: Optional[Union[Dict, Text]] = None,
    query: Optional[Text] = None,
    session_id: Optional[Text] = None,
    history: Optional[List[Dict]] = None,
    name: Text = "model_process",
    parameters: Dict = {},
    content: Optional[Union[Dict[Text, Text], List[Text]]] = None,
    max_tokens: int = 2048,
    max_iterations: int = 30,
    output_format: Optional[OutputFormat] = None,
    expected_output: Optional[Union[BaseModel, Text, dict]] = None
) -> AgentResponse
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L273)

Runs asynchronously a Team Agent call.

**Arguments**:

- `data` _Optional[Union[Dict, Text]], optional_ - data to be processed by the Team Agent. Defaults to None.
- `query` _Optional[Text], optional_ - query to be processed by the Team Agent. Defaults to None.
- `session_id` _Optional[Text], optional_ - conversation Session ID. Defaults to None.
- `history` _Optional[List[Dict]], optional_ - chat history (in case session ID is None). Defaults to None.
- `name` _Text, optional_ - ID given to a call. Defaults to &quot;model_process&quot;.
- `parameters` _Dict, optional_ - optional parameters to the model. Defaults to &quot;\{}&quot;.
- `content` _Union[Dict[Text, Text], List[Text]], optional_ - Content inputs to be processed according to the query. Defaults to None.
- `max_tokens` _int, optional_ - maximum number of tokens which can be generated by the agents. Defaults to 2048.
- `max_iterations` _int, optional_ - maximum number of iterations between the agents. Defaults to 30.
- `output_format` _OutputFormat, optional_ - response format. If not provided, uses the format set during initialization.
- `query`0 _Union[BaseModel, Text, dict], optional_ - expected output. Defaults to None.

**Returns**:

- `query`1 - polling URL in response

#### delete

```python
def delete() -> None
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L402)

Delete Corpus service

#### to\_dict

```python
def to_dict() -> Dict
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L461)

Convert the TeamAgent instance to a dictionary representation.

This method serializes the TeamAgent and all its components (agents,
inspectors, LLMs, etc.) into a dictionary format suitable for storage
or transmission.

**Returns**:

- `Dict` - A dictionary containing:
  - id (str): The team agent&#x27;s ID
  - name (str): The team agent&#x27;s name
  - agents (List[Dict]): Serialized list of agents
  - links (List): Empty list (reserved for future use)
  - description (str): The team agent&#x27;s description
  - llmId (str): ID of the main language model
  - supervisorId (str): ID of the supervisor language model
  - plannerId (str): ID of the planner model (if use_mentalist)
  - inspectors (List[Dict]): Serialized list of inspectors
  - inspectorTargets (List[str]): List of inspector target stages
  - supplier (str): The supplier code
  - version (str): The version number
  - status (str): The current status
  - role (str): The team agent&#x27;s instructions

#### from\_dict

```python
@classmethod
def from_dict(cls, data: Dict) -> "TeamAgent"
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L509)

Create a TeamAgent instance from a dictionary representation.

**Arguments**:

- `data` - Dictionary containing TeamAgent parameters
  

**Returns**:

  TeamAgent instance

#### validate

```python
def validate(raise_exception: bool = False) -> bool
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L630)

Validate the TeamAgent configuration.

This method checks the validity of the TeamAgent&#x27;s configuration,
including name format, LLM compatibility, and agent validity.

**Arguments**:

- `raise_exception` _bool, optional_ - If True, raises exceptions for
  validation failures. If False, logs warnings. Defaults to False.
  

**Returns**:

- `bool` - True if validation succeeds, False otherwise.
  

**Raises**:

- `Exception` - If raise_exception is True and validation fails, with
  details about the specific validation error.
  

**Notes**:

  - The team agent cannot be run until all validation issues are fixed
  - Name must contain only alphanumeric chars, spaces, hyphens, brackets
  - LLM must be a text generation model
  - All agents must pass their own validation

#### update

```python
def update() -> None
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L666)

Update the TeamAgent in the backend.

This method validates and updates the TeamAgent&#x27;s configuration in the
backend system. It is deprecated in favor of the save() method.

**Raises**:

- `Exception` - If validation fails or if the update request fails.
  Specific error messages will indicate:
  - Validation failures with details
  - HTTP errors with status codes
  - General update errors requiring admin attention
  

**Notes**:

  - This method is deprecated, use save() instead
  - Performs validation before attempting update
  - Requires valid team API key for authentication
  - Returns a new TeamAgent instance if successful

#### save

```python
def save() -> None
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L718)

Save the Agent.

#### \_\_repr\_\_

```python
def __repr__()
```

[[view_source]](https://github.com/aixplain/aiXplain/blob/main/aixplain/modules/team_agent/__init__.py#L722)

Return a string representation of the TeamAgent.

**Returns**:

- `str` - A string in the format &quot;TeamAgent: &lt;name&gt; (id=&lt;id&gt;)&quot;.

